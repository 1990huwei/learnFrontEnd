<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç½‘é¡µæ€§èƒ½ä¼˜åŒ–å®Œæ•´ç¤ºä¾‹</title>
    <meta name="description" content="å±•ç¤ºç½‘é¡µæ€§èƒ½ä¼˜åŒ–çš„å„ç§æŠ€æœ¯å’Œæœ€ä½³å®è·µ">
    
    <!-- é¢„è¿æ¥åˆ°å¤–éƒ¨èµ„æº -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://api.example.com">
    
    <!-- å…³é”®CSSå†…è” -->
    <style>
        /* å…³é”®æ¸²æŸ“è·¯å¾„CSS - é¦–å±å†…å®¹æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        .hero-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }
        
        .hero-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        /* åŠ è½½æŒ‡ç¤ºå™¨ */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* éª¨æ¶å±æ ·å¼ */
        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .skeleton-text {
            height: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 4px;
        }
        
        .skeleton-title {
            height: 2rem;
            width: 60%;
            margin-bottom: 1rem;
            border-radius: 4px;
        }
        
        .skeleton-image {
            height: 200px;
            width: 100%;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
    </style>
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="preload" href="#" as="font" type="font/woff2" crossorigin>
    <link rel="preload" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjNjY3ZWVhIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuaAp+iDveS8mOWMluekuuS+izwvdGV4dD4KICA8dGV4dCB4PSI1MCUiIHk9IjU1JSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+NDAwIHggMzAwPC90ZXh0Pgo8L3N2Zz4K" as="image">
</head>
<body>
    <!-- é¦–å±å†…å®¹ -->
    <header class="header">
        <div class="container">
            <h1 class="hero-title">ç½‘é¡µæ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹</h1>
            <p class="hero-subtitle">æ¢ç´¢ç°ä»£Webæ€§èƒ½ä¼˜åŒ–æŠ€æœ¯</p>
        </div>
    </header>
    
    <main class="container" style="margin-top: 2rem;">
        <!-- Core Web Vitals ç›‘æ§ -->
        <section class="section" style="background: white; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h2 style="color: #667eea; margin-bottom: 1rem; font-size: 1.8rem;">ğŸ“Š Core Web Vitals å®æ—¶ç›‘æ§</h2>
            <p style="margin-bottom: 1.5rem; color: #666;">ç›‘æ§é¡µé¢çš„æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡ï¼šLCPã€FIDã€CLS</p>
            
            <div id="vitals-display" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                <div class="metric-card" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #28a745;">
                    <h3 style="margin-bottom: 0.5rem; color: #28a745;">LCP (Largest Contentful Paint)</h3>
                    <div class="metric-value" id="lcp-value" style="font-size: 2rem; font-weight: bold; color: #333;">æµ‹é‡ä¸­...</div>
                    <div class="metric-description" style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´</div>
                </div>
                
                <div class="metric-card" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #ffc107;">
                    <h3 style="margin-bottom: 0.5rem; color: #ffc107;">FID (First Input Delay)</h3>
                    <div class="metric-value" id="fid-value" style="font-size: 2rem; font-weight: bold; color: #333;">ç­‰å¾…äº¤äº’...</div>
                    <div class="metric-description" style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ</div>
                </div>
                
                <div class="metric-card" style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #17a2b8;">
                    <h3 style="margin-bottom: 0.5rem; color: #17a2b8;">CLS (Cumulative Layout Shift)</h3>
                    <div class="metric-value" id="cls-value" style="font-size: 2rem; font-weight: bold; color: #333;">0.000</div>
                    <div class="metric-description" style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">ç´¯ç§¯å¸ƒå±€åç§»</div>
                </div>
            </div>
            
            <div style="margin-top: 1.5rem; padding: 1rem; background: #e3f2fd; border-radius: 4px;">
                <h4 style="margin-bottom: 0.5rem; color: #1976d2;">æ€§èƒ½è¯„åˆ†æ ‡å‡†ï¼š</h4>
                <ul style="margin-left: 1.5rem; color: #666;">
                    <li>LCP: å¥½ (&lt;2.5s) | éœ€è¦æ”¹è¿› (2.5-4s) | å·® (&gt;4s)</li>
                    <li>FID: å¥½ (&lt;100ms) | éœ€è¦æ”¹è¿› (100-300ms) | å·® (&gt;300ms)</li>
                    <li>CLS: å¥½ (&lt;0.1) | éœ€è¦æ”¹è¿› (0.1-0.25) | å·® (&gt;0.25)</li>
                </ul>
            </div>
        </section>
        
        <!-- å›¾ç‰‡ä¼˜åŒ–ç¤ºä¾‹ -->
        <section class="section" style="background: white; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h2 style="color: #667eea; margin-bottom: 1rem; font-size: 1.8rem;">ğŸ–¼ï¸ å›¾ç‰‡ä¼˜åŒ–æŠ€æœ¯</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                <!-- æ‡’åŠ è½½å›¾ç‰‡ -->
                <div>
                    <h3 style="margin-bottom: 1rem; color: #555;">æ‡’åŠ è½½å›¾ç‰‡</h3>
                    <div class="lazy-image-container" style="position: relative; height: 200px; background: #f0f0f0; border-radius: 8px; overflow: hidden;">
                        <img 
                            class="lazy-image" 
                            data-src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjNjY3ZWVhIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuaAp+iDveS8mOWMluekuuS+izwvdGV4dD4KICA8dGV4dCB4PSI1MCUiIHk9IjU1JSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+NDAwIHggMzAwPC90ZXh0Pgo8L3N2Zz4K"
                            alt="æ€§èƒ½ä¼˜åŒ–ç¤ºä¾‹å›¾ç‰‡"
                            style="width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.3s;"
                            loading="lazy"
                        >
                        <div class="image-placeholder" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #666;">
                            <div class="loading"></div>
                            <p style="margin-top: 1rem;">å›¾ç‰‡åŠ è½½ä¸­...</p>
                        </div>
                    </div>
                </div>
                
                <!-- å“åº”å¼å›¾ç‰‡ -->
                <div>
                    <h3 style="margin-bottom: 1rem; color: #555;">å“åº”å¼å›¾ç‰‡</h3>
                    <picture style="display: block; height: 200px; border-radius: 8px; overflow: hidden;">
                        <source media="(max-width: 768px)" srcset="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY2YjZiIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuenu+WKqOeJiDwvdGV4dD4KICA8dGV4dCB4PSI1MCUiIHk9IjU1JSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+MzAwIHggMjAwPC90ZXh0Pgo8L3N2Zz4K">
                        <img 
                            src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjNGVjZGMzIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI0NSUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIyMCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuahjOmdoueCiTwvdGV4dD4KICA8dGV4dCB4PSI1MCUiIHk9IjU1JSIgZm9udC1mYW1pbHk9IkFyaWFsLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjE2IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+NDAwIHggMzAwPC90ZXh0Pgo8L3N2Zz4K" 
                            alt="å“åº”å¼å›¾ç‰‡ç¤ºä¾‹"
                            style="width: 100%; height: 100%; object-fit: cover;"
                        >
                    </picture>
                </div>
            </div>
            
            <div style="background: #fff3cd; padding: 1rem; border-radius: 4px; border-left: 4px solid #ffc107;">
                <h4 style="margin-bottom: 0.5rem; color: #856404;">å›¾ç‰‡ä¼˜åŒ–æŠ€å·§ï¼š</h4>
                <ul style="margin-left: 1.5rem; color: #856404;">
                    <li>ä½¿ç”¨ç°ä»£å›¾ç‰‡æ ¼å¼ï¼ˆWebPã€AVIFï¼‰</li>
                    <li>å®æ–½æ‡’åŠ è½½å‡å°‘åˆå§‹åŠ è½½æ—¶é—´</li>
                    <li>ä½¿ç”¨å“åº”å¼å›¾ç‰‡é€‚é…ä¸åŒè®¾å¤‡</li>
                    <li>å‹ç¼©å›¾ç‰‡æ–‡ä»¶å¤§å°</li>
                    <li>ä½¿ç”¨CDNåŠ é€Ÿå›¾ç‰‡ä¼ è¾“</li>
                </ul>
            </div>
        </section>
        
        <!-- èµ„æºåŠ è½½ä¼˜åŒ– -->
        <section class="section" style="background: white; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h2 style="color: #667eea; margin-bottom: 1rem; font-size: 1.8rem;">âš¡ èµ„æºåŠ è½½ä¼˜åŒ–</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <!-- å…³é”®èµ„æºä¼˜å…ˆçº§ -->
                <div>
                    <h3 style="margin-bottom: 1rem; color: #555;">èµ„æºä¼˜å…ˆçº§</h3>
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
                        <div style="margin-bottom: 0.5rem;">ğŸ”´ <strong>å…³é”®èµ„æº</strong>: é¦–å±CSSã€å­—ä½“</div>
                        <div style="margin-bottom: 0.5rem;">ğŸŸ¡ <strong>é‡è¦èµ„æº</strong>: é¦–å±å›¾ç‰‡ã€ä¸»è¦JS</div>
                        <div style="margin-bottom: 0.5rem;">ğŸŸ¢ <strong>æ¬¡è¦èµ„æº</strong>: éé¦–å±å†…å®¹ã€åˆ†æè„šæœ¬</div>
                    </div>
                    
                    <button id="loadCriticalBtn" style="margin-top: 1rem; background: #28a745; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">æ¨¡æ‹Ÿå…³é”®èµ„æºåŠ è½½</button>
                </div>
                
                <!-- ä»£ç åˆ†å‰² -->
                <div>
                    <h3 style="margin-bottom: 1rem; color: #555;">ä»£ç åˆ†å‰²</h3>
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
                        <p style="margin-bottom: 1rem; color: #666;">æŒ‰éœ€åŠ è½½JavaScriptæ¨¡å—</p>
                        <div id="moduleStatus" style="margin-bottom: 1rem; padding: 0.5rem; background: #e9ecef; border-radius: 4px;">æ¨¡å—æœªåŠ è½½</div>
                    </div>
                    
                    <button id="loadModuleBtn" style="background: #007bff; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">åŠ¨æ€åŠ è½½æ¨¡å—</button>
                </div>
            </div>
        </section>
        
        <!-- ç¼“å­˜ç­–ç•¥ -->
        <section class="section" style="background: white; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h2 style="color: #667eea; margin-bottom: 1rem; font-size: 1.8rem;">ğŸ’¾ ç¼“å­˜ç­–ç•¥æ¼”ç¤º</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <!-- æµè§ˆå™¨ç¼“å­˜ -->
                <div>
                    <h3 style="margin-bottom: 1rem; color: #555;">æµè§ˆå™¨ç¼“å­˜</h3>
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
                        <div>ç¼“å­˜çŠ¶æ€: <span id="cacheStatus" style="font-weight: bold;">æ£€æŸ¥ä¸­...</span></div>
                        <div>ç¼“å­˜å¤§å°: <span id="cacheSize" style="font-weight: bold;">è®¡ç®—ä¸­...</span></div>
                    </div>
                    
                    <button id="testCacheBtn" style="background: #6f42c1; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer; margin-right: 0.5rem;">æµ‹è¯•ç¼“å­˜</button>
                    <button id="clearCacheBtn" style="background: #dc3545; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">æ¸…é™¤ç¼“å­˜</button>
                </div>
                
                <!-- Service Worker -->
                <div>
                    <h3 style="margin-bottom: 1rem; color: #555;">Service Worker</h3>
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
                        <div>SWçŠ¶æ€: <span id="swStatus" style="font-weight: bold;">æ£€æŸ¥ä¸­...</span></div>
                        <div>ç¦»çº¿æ”¯æŒ: <span id="offlineStatus" style="font-weight: bold;">æœªå¯ç”¨</span></div>
                    </div>
                    
                    <button id="registerSWBtn" style="background: #20c997; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">æ³¨å†ŒService Worker</button>
                </div>
            </div>
        </section>
        
        <!-- æ€§èƒ½ç›‘æ§ -->
        <section class="section" style="background: white; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h2 style="color: #667eea; margin-bottom: 1rem; font-size: 1.8rem;">ğŸ“ˆ æ€§èƒ½ç›‘æ§é¢æ¿</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
                    <h4 style="color: #495057; margin-bottom: 0.5rem;">é¡µé¢åŠ è½½æ—¶é—´</h4>
                    <div id="loadTime" style="font-size: 1.5rem; font-weight: bold; color: #28a745;">è®¡ç®—ä¸­...</div>
                </div>
                
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
                    <h4 style="color: #495057; margin-bottom: 0.5rem;">DOMèŠ‚ç‚¹æ•°é‡</h4>
                    <div id="domNodes" style="font-size: 1.5rem; font-weight: bold; color: #007bff;">è®¡ç®—ä¸­...</div>
                </div>
                
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
                    <h4 style="color: #495057; margin-bottom: 0.5rem;">å†…å­˜ä½¿ç”¨</h4>
                    <div id="memoryUsage" style="font-size: 1.5rem; font-weight: bold; color: #ffc107;">æ£€æµ‹ä¸­...</div>
                </div>
                
                <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px;">
                    <h4 style="color: #495057; margin-bottom: 0.5rem;">ç½‘ç»œçŠ¶æ€</h4>
                    <div id="networkStatus" style="font-size: 1.5rem; font-weight: bold; color: #17a2b8;">æ£€æµ‹ä¸­...</div>
                </div>
            </div>
            
            <!-- æ€§èƒ½æ—¶é—´çº¿ -->
            <div>
                <h3 style="margin-bottom: 1rem; color: #555;">æ€§èƒ½æ—¶é—´çº¿</h3>
                <div id="performanceTimeline" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; font-family: monospace; font-size: 0.9rem; line-height: 1.4;">åŠ è½½æ€§èƒ½æ•°æ®...</div>
            </div>
            
            <button id="refreshMetricsBtn" style="margin-top: 1rem; background: #6c757d; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">åˆ·æ–°æŒ‡æ ‡</button>
        </section>
        
        <!-- ä¼˜åŒ–å»ºè®® -->
        <section class="section" style="background: white; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h2 style="color: #667eea; margin-bottom: 1rem; font-size: 1.8rem;">ğŸ’¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
            
            <div id="optimizationSuggestions" style="display: grid; gap: 1rem;">
                <!-- å»ºè®®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </section>
        
        <!-- æµ‹è¯•åŒºåŸŸ -->
        <section class="section" style="background: white; padding: 2rem; border-radius: 8px; margin-bottom: 2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
            <h2 style="color: #667eea; margin-bottom: 1rem; font-size: 1.8rem;">ğŸ§ª æ€§èƒ½æµ‹è¯•å·¥å…·</h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <!-- å¸ƒå±€æŠ–åŠ¨æµ‹è¯• -->
                <div>
                    <h3 style="margin-bottom: 1rem; color: #555;">å¸ƒå±€æŠ–åŠ¨æµ‹è¯•</h3>
                    <div id="layoutShiftDemo" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; min-height: 150px; position: relative;">
                        <div id="shiftElement" style="background: #007bff; color: white; padding: 1rem; border-radius: 4px; transition: all 0.3s;">è¿™ä¸ªå…ƒç´ ä¼šå‘ç”Ÿå¸ƒå±€åç§»</div>
                    </div>
                    <button id="triggerShiftBtn" style="margin-top: 1rem; background: #fd7e14; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">è§¦å‘å¸ƒå±€åç§»</button>
                </div>
                
                <!-- é•¿ä»»åŠ¡æ¨¡æ‹Ÿ -->
                <div>
                    <h3 style="margin-bottom: 1rem; color: #555;">é•¿ä»»åŠ¡æ¨¡æ‹Ÿ</h3>
                    <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
                        <p style="color: #666; margin-bottom: 1rem;">æ¨¡æ‹Ÿé˜»å¡ä¸»çº¿ç¨‹çš„é•¿ä»»åŠ¡</p>
                        <div>ä»»åŠ¡çŠ¶æ€: <span id="taskStatus" style="font-weight: bold;">å°±ç»ª</span></div>
                    </div>
                    <button id="longTaskBtn" style="background: #e83e8c; color: white; border: none; padding: 0.5rem 1rem; border-radius: 4px; cursor: pointer;">æ‰§è¡Œé•¿ä»»åŠ¡ (3ç§’)</button>
                </div>
            </div>
        </section>
    </main>
    
    <!-- å»¶è¿ŸåŠ è½½çš„éå…³é”®CSS -->
    <link rel="preload" href="data:text/css;base64,LyogTm9uLWNyaXRpY2FsIENTUyAqLwouZmFkZS1pbiB7CiAgICBhbmltYXRpb246IGZhZGVJbiAwLjVzIGVhc2UtaW47Cn0KCkBrZXlmcmFtZXMgZmFkZUluIHsKICAgIGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMjBweCk7IH0KICAgIHRvIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9Cn0=" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- æ€§èƒ½ç›‘æ§è„šæœ¬ -->
    <script>
        // Core Web Vitals ç›‘æ§
        let lcpValue = 0;
        let fidValue = 0;
        let clsValue = 0;
        
        // LCP ç›‘æ§
        new PerformanceObserver((entryList) => {
            const entries = entryList.getEntries();
            const lastEntry = entries[entries.length - 1];
            lcpValue = lastEntry.startTime;
            updateLCPDisplay();
        }).observe({entryTypes: ['largest-contentful-paint']});
        
        // FID ç›‘æ§
        new PerformanceObserver((entryList) => {
            const entries = entryList.getEntries();
            entries.forEach((entry) => {
                fidValue = entry.processingStart - entry.startTime;
                updateFIDDisplay();
            });
        }).observe({entryTypes: ['first-input']});
        
        // CLS ç›‘æ§
        let clsScore = 0;
        new PerformanceObserver((entryList) => {
            const entries = entryList.getEntries();
            entries.forEach((entry) => {
                if (!entry.hadRecentInput) {
                    clsScore += entry.value;
                    clsValue = clsScore;
                    updateCLSDisplay();
                }
            });
        }).observe({entryTypes: ['layout-shift']});
        
        function updateLCPDisplay() {
            const element = document.getElementById('lcp-value');
            const value = (lcpValue / 1000).toFixed(2);
            element.textContent = value + 's';
            
            // æ ¹æ®æ€§èƒ½æ ‡å‡†è®¾ç½®é¢œè‰²
            if (lcpValue < 2500) {
                element.style.color = '#28a745'; // å¥½
            } else if (lcpValue < 4000) {
                element.style.color = '#ffc107'; // éœ€è¦æ”¹è¿›
            } else {
                element.style.color = '#dc3545'; // å·®
            }
        }
        
        function updateFIDDisplay() {
            const element = document.getElementById('fid-value');
            const value = fidValue.toFixed(2);
            element.textContent = value + 'ms';
            
            if (fidValue < 100) {
                element.style.color = '#28a745';
            } else if (fidValue < 300) {
                element.style.color = '#ffc107';
            } else {
                element.style.color = '#dc3545';
            }
        }
        
        function updateCLSDisplay() {
            const element = document.getElementById('cls-value');
            const value = clsValue.toFixed(3);
            element.textContent = value;
            
            if (clsValue < 0.1) {
                element.style.color = '#28a745';
            } else if (clsValue < 0.25) {
                element.style.color = '#ffc107';
            } else {
                element.style.color = '#dc3545';
            }
        }
        
        // æ‡’åŠ è½½å›¾ç‰‡
        const lazyImages = document.querySelectorAll('.lazy-image');
        const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    const placeholder = img.nextElementSibling;
                    
                    img.src = img.dataset.src;
                    img.onload = () => {
                        img.style.opacity = '1';
                        if (placeholder) {
                            placeholder.style.display = 'none';
                        }
                    };
                    
                    observer.unobserve(img);
                }
            });
        });
        
        lazyImages.forEach(img => imageObserver.observe(img));
        
        // èµ„æºåŠ è½½ä¼˜åŒ–
        document.getElementById('loadCriticalBtn').addEventListener('click', () => {
            const btn = event.target;
            btn.textContent = 'åŠ è½½ä¸­...';
            btn.disabled = true;
            
            // æ¨¡æ‹Ÿå…³é”®èµ„æºåŠ è½½
            setTimeout(() => {
                btn.textContent = 'âœ… å…³é”®èµ„æºå·²åŠ è½½';
                btn.style.background = '#28a745';
            }, 2000);
        });
        
        // åŠ¨æ€æ¨¡å—åŠ è½½
        document.getElementById('loadModuleBtn').addEventListener('click', async () => {
            const statusElement = document.getElementById('moduleStatus');
            const btn = event.target;
            
            btn.textContent = 'åŠ è½½ä¸­...';
            btn.disabled = true;
            statusElement.textContent = 'æ­£åœ¨åŠ è½½æ¨¡å—...';
            
            try {
                // æ¨¡æ‹ŸåŠ¨æ€å¯¼å…¥
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                statusElement.textContent = 'âœ… æ¨¡å—åŠ è½½æˆåŠŸ';
                statusElement.style.background = '#d4edda';
                statusElement.style.color = '#155724';
                
                btn.textContent = 'âœ… å·²åŠ è½½';
                btn.style.background = '#28a745';
            } catch (error) {
                statusElement.textContent = 'âŒ æ¨¡å—åŠ è½½å¤±è´¥';
                statusElement.style.background = '#f8d7da';
                statusElement.style.color = '#721c24';
                
                btn.textContent = 'é‡è¯•';
                btn.disabled = false;
            }
        });
        
        // ç¼“å­˜æµ‹è¯•
        function updateCacheStatus() {
            const cacheStatus = document.getElementById('cacheStatus');
            const cacheSize = document.getElementById('cacheSize');
            
            // æ£€æŸ¥localStorageä½¿ç”¨æƒ…å†µ
            let totalSize = 0;
            for (let key in localStorage) {
                if (localStorage.hasOwnProperty(key)) {
                    totalSize += localStorage[key].length;
                }
            }
            
            cacheStatus.textContent = totalSize > 0 ? 'æœ‰ç¼“å­˜æ•°æ®' : 'æ— ç¼“å­˜æ•°æ®';
            cacheSize.textContent = (totalSize / 1024).toFixed(2) + ' KB';
        }
        
        document.getElementById('testCacheBtn').addEventListener('click', () => {
            // åˆ›å»ºæµ‹è¯•ç¼“å­˜æ•°æ®
            const testData = 'performance-test-data-' + Date.now();
            localStorage.setItem('performanceTest', testData);
            updateCacheStatus();
        });
        
        document.getElementById('clearCacheBtn').addEventListener('click', () => {
            localStorage.clear();
            updateCacheStatus();
        });
        
        // Service Worker
        function updateSWStatus() {
            const swStatus = document.getElementById('swStatus');
            const offlineStatus = document.getElementById('offlineStatus');
            
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.getRegistration().then(registration => {
                    if (registration) {
                        swStatus.textContent = 'å·²æ³¨å†Œ';
                        swStatus.style.color = '#28a745';
                        offlineStatus.textContent = 'å·²å¯ç”¨';
                        offlineStatus.style.color = '#28a745';
                    } else {
                        swStatus.textContent = 'æœªæ³¨å†Œ';
                        swStatus.style.color = '#dc3545';
                    }
                });
            } else {
                swStatus.textContent = 'ä¸æ”¯æŒ';
                swStatus.style.color = '#6c757d';
            }
        }
        
        document.getElementById('registerSWBtn').addEventListener('click', () => {
            if ('serviceWorker' in navigator) {
                // åˆ›å»ºç®€å•çš„Service Worker
                const swCode = `
                    self.addEventListener('install', event => {
                        console.log('Service Worker å®‰è£…');
                    });
                    
                    self.addEventListener('fetch', event => {
                        // ç®€å•çš„ç¼“å­˜ç­–ç•¥
                        event.respondWith(
                            caches.match(event.request).then(response => {
                                return response || fetch(event.request);
                            })
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl).then(() => {
                    updateSWStatus();
                    alert('Service Worker æ³¨å†ŒæˆåŠŸï¼');
                }).catch(error => {
                    console.error('Service Worker æ³¨å†Œå¤±è´¥:', error);
                });
            }
        });
        
        // æ€§èƒ½ç›‘æ§
        function updatePerformanceMetrics() {
            const loadTime = document.getElementById('loadTime');
            const domNodes = document.getElementById('domNodes');
            const memoryUsage = document.getElementById('memoryUsage');
            const networkStatus = document.getElementById('networkStatus');
            const timeline = document.getElementById('performanceTimeline');
            
            // é¡µé¢åŠ è½½æ—¶é—´
            const navigation = performance.getEntriesByType('navigation')[0];
            if (navigation) {
                const loadTimeValue = (navigation.loadEventEnd - navigation.navigationStart) / 1000;
                loadTime.textContent = loadTimeValue.toFixed(2) + 's';
            }
            
            // DOMèŠ‚ç‚¹æ•°é‡
            domNodes.textContent = document.querySelectorAll('*').length;
            
            // å†…å­˜ä½¿ç”¨ï¼ˆå¦‚æœæ”¯æŒï¼‰
            if (performance.memory) {
                const memoryMB = (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2);
                memoryUsage.textContent = memoryMB + ' MB';
            } else {
                memoryUsage.textContent = 'ä¸æ”¯æŒ';
            }
            
            // ç½‘ç»œçŠ¶æ€
            if (navigator.connection) {
                const connection = navigator.connection;
                networkStatus.textContent = connection.effectiveType || 'æœªçŸ¥';
            } else {
                networkStatus.textContent = 'ä¸æ”¯æŒ';
            }
            
            // æ€§èƒ½æ—¶é—´çº¿
            if (navigation) {
                timeline.innerHTML = `
                    DNSæŸ¥è¯¢: ${(navigation.domainLookupEnd - navigation.domainLookupStart).toFixed(2)}ms<br>
                    TCPè¿æ¥: ${(navigation.connectEnd - navigation.connectStart).toFixed(2)}ms<br>
                    è¯·æ±‚å“åº”: ${(navigation.responseEnd - navigation.requestStart).toFixed(2)}ms<br>
                    DOMè§£æ: ${(navigation.domContentLoadedEventEnd - navigation.responseEnd).toFixed(2)}ms<br>
                    èµ„æºåŠ è½½: ${(navigation.loadEventEnd - navigation.domContentLoadedEventEnd).toFixed(2)}ms
                `;
            }
        }
        
        document.getElementById('refreshMetricsBtn').addEventListener('click', updatePerformanceMetrics);
        
        // ä¼˜åŒ–å»ºè®®
        function generateOptimizationSuggestions() {
            const container = document.getElementById('optimizationSuggestions');
            const suggestions = [];
            
            // åŸºäºå½“å‰æ€§èƒ½æŒ‡æ ‡ç”Ÿæˆå»ºè®®
            if (lcpValue > 2500) {
                suggestions.push({
                    type: 'warning',
                    title: 'LCPä¼˜åŒ–å»ºè®®',
                    content: 'æœ€å¤§å†…å®¹ç»˜åˆ¶æ—¶é—´è¾ƒé•¿ï¼Œå»ºè®®ä¼˜åŒ–å›¾ç‰‡åŠ è½½ã€å‡å°‘æœåŠ¡å™¨å“åº”æ—¶é—´ã€ä½¿ç”¨CDNã€‚'
                });
            }
            
            if (clsValue > 0.1) {
                suggestions.push({
                    type: 'error',
                    title: 'CLSä¼˜åŒ–å»ºè®®',
                    content: 'ç´¯ç§¯å¸ƒå±€åç§»è¾ƒå¤§ï¼Œå»ºè®®ä¸ºå›¾ç‰‡å’Œå¹¿å‘Šè®¾ç½®å°ºå¯¸å±æ€§ã€é¿å…åœ¨ç°æœ‰å†…å®¹ä¸Šæ–¹æ’å…¥å†…å®¹ã€‚'
                });
            }
            
            if (document.querySelectorAll('*').length > 1500) {
                suggestions.push({
                    type: 'info',
                    title: 'DOMä¼˜åŒ–å»ºè®®',
                    content: 'DOMèŠ‚ç‚¹æ•°é‡è¾ƒå¤šï¼Œå»ºè®®ç®€åŒ–HTMLç»“æ„ã€ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ã€å»¶è¿Ÿæ¸²æŸ“éå…³é”®å†…å®¹ã€‚'
                });
            }
            
            // é€šç”¨å»ºè®®
            suggestions.push(
                {
                    type: 'success',
                    title: 'å›¾ç‰‡ä¼˜åŒ–',
                    content: 'ä½¿ç”¨ç°ä»£å›¾ç‰‡æ ¼å¼ï¼ˆWebPã€AVIFï¼‰ã€å®æ–½æ‡’åŠ è½½ã€å‹ç¼©å›¾ç‰‡æ–‡ä»¶å¤§å°ã€‚'
                },
                {
                    type: 'info',
                    title: 'ä»£ç åˆ†å‰²',
                    content: 'ä½¿ç”¨åŠ¨æ€å¯¼å…¥åˆ†å‰²JavaScriptä»£ç ã€æŒ‰è·¯ç”±åˆ†å‰²ã€ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ã€‚'
                },
                {
                    type: 'success',
                    title: 'ç¼“å­˜ç­–ç•¥',
                    content: 'é…ç½®é€‚å½“çš„HTTPç¼“å­˜å¤´ã€ä½¿ç”¨Service Workerã€å®æ–½èµ„æºç‰ˆæœ¬æ§åˆ¶ã€‚'
                }
            );
            
            container.innerHTML = suggestions.map(suggestion => {
                const colors = {
                    success: { bg: '#d4edda', border: '#28a745', text: '#155724' },
                    info: { bg: '#d1ecf1', border: '#17a2b8', text: '#0c5460' },
                    warning: { bg: '#fff3cd', border: '#ffc107', text: '#856404' },
                    error: { bg: '#f8d7da', border: '#dc3545', text: '#721c24' }
                };
                
                const color = colors[suggestion.type];
                
                return `
                    <div style="background: ${color.bg}; border-left: 4px solid ${color.border}; padding: 1rem; border-radius: 4px;">
                        <h4 style="color: ${color.text}; margin-bottom: 0.5rem;">${suggestion.title}</h4>
                        <p style="color: ${color.text}; margin: 0;">${suggestion.content}</p>
                    </div>
                `;
            }).join('');
        }
        
        // å¸ƒå±€æŠ–åŠ¨æµ‹è¯•
        document.getElementById('triggerShiftBtn').addEventListener('click', () => {
            const element = document.getElementById('shiftElement');
            const isShifted = element.style.marginTop === '50px';
            
            element.style.marginTop = isShifted ? '0px' : '50px';
            element.style.marginLeft = isShifted ? '0px' : '100px';
            
            event.target.textContent = isShifted ? 'è§¦å‘å¸ƒå±€åç§»' : 'æ¢å¤åŸä½';
        });
        
        // é•¿ä»»åŠ¡æ¨¡æ‹Ÿ
        document.getElementById('longTaskBtn').addEventListener('click', () => {
            const statusElement = document.getElementById('taskStatus');
            const btn = event.target;
            
            btn.disabled = true;
            statusElement.textContent = 'æ‰§è¡Œä¸­...';
            statusElement.style.color = '#ffc107';
            
            // æ¨¡æ‹Ÿé•¿ä»»åŠ¡ï¼ˆé˜»å¡ä¸»çº¿ç¨‹ï¼‰
            const startTime = Date.now();
            while (Date.now() - startTime < 3000) {
                // ç©ºå¾ªç¯ï¼Œé˜»å¡ä¸»çº¿ç¨‹
            }
            
            statusElement.textContent = 'å·²å®Œæˆ';
            statusElement.style.color = '#28a745';
            btn.disabled = false;
        });
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', () => {
            updateCacheStatus();
            updateSWStatus();
            updatePerformanceMetrics();
            generateOptimizationSuggestions();
            
            // å»¶è¿Ÿæ›´æ–°æŒ‡æ ‡ä»¥è·å–æ›´å‡†ç¡®çš„æ•°æ®
            setTimeout(() => {
                updatePerformanceMetrics();
                generateOptimizationSuggestions();
            }, 2000);
        });
        
        // ç›‘å¬ç½‘ç»œçŠ¶æ€å˜åŒ–
        window.addEventListener('online', () => {
            document.getElementById('networkStatus').textContent = 'åœ¨çº¿';
        });
        
        window.addEventListener('offline', () => {
            document.getElementById('networkStatus').textContent = 'ç¦»çº¿';
        });
    </script>
    
    <!-- æ€§èƒ½åˆ†æè„šæœ¬ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰ -->
    <script async>
        // ç”¨æˆ·ä½“éªŒæŒ‡æ ‡æ”¶é›†
        function collectUXMetrics() {
            // æ”¶é›†ç”¨æˆ·äº¤äº’æ•°æ®
            let clickCount = 0;
            let scrollDepth = 0;
            
            document.addEventListener('click', () => {
                clickCount++;
            });
            
            window.addEventListener('scroll', () => {
                const scrollTop = window.pageYOffset;
                const docHeight = document.documentElement.scrollHeight - window.innerHeight;
                scrollDepth = Math.max(scrollDepth, (scrollTop / docHeight) * 100);
            });
            
            // é¡µé¢å¸è½½æ—¶å‘é€æ•°æ®
            window.addEventListener('beforeunload', () => {
                const metrics = {
                    clickCount,
                    scrollDepth: scrollDepth.toFixed(2),
                    timeOnPage: (Date.now() - performance.timing.navigationStart) / 1000
                };
                
                console.log('ç”¨æˆ·ä½“éªŒæŒ‡æ ‡:', metrics);
                // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šå‘é€åˆ°åˆ†ææœåŠ¡
            });
        }
        
        // å»¶è¿Ÿæ‰§è¡Œä»¥é¿å…å½±å“å…³é”®æ¸²æŸ“è·¯å¾„
        setTimeout(collectUXMetrics, 3000);
    </script>
</body>
</html>